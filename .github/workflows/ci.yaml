---

name: 'CI'


on:
  # workflow_call:
  #   inputs:
  #     build-branch:         # tag / dev
  #       required: true
  #       type: string
  push:
    # branches:
    #   # - '*'         # matches every branch that doesn't contain a '/'
    #   # - '*/*'       # matches every branch containing a single '/'
    #   - '**'        # matches every branch
    # tags:
    #   - '*'
  # pull_request:
  #   branches:
  #     - '**'
  #   types:
  #     - opened
  #     - synchronize
  #     - closed
  #     - reopened


# env:
#   DOCKER_BUILD_IMAGE: "ghcr.io/${{ github.repository }}-fred:${{ github.sha }}"


# permissions:
#   pull-requests: write
#   contents: read
#   actions: read
#   checks: write
#   packages: write
#   security-events: write
#   statuses: write



jobs:

  docker:
    name: 'Docker'
    uses: ./.github/workflows/docker.yaml
    with:
      DOCKER_BUILD_IMAGE_NAME: "${{ github.repository }}"


  release:
    name: 'Release'
    uses: ./.github/workflows/release.yaml
    # with:
    #   DOCKER_BUILD_IMAGE_NAME: "${{ github.repository }}"
